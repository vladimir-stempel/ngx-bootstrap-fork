{"version":3,"file":"week.js","sourceRoot":"","sources":["../../../../../src/chronos/units/week.ts"],"names":[],"mappings":"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","sourcesContent":["import { addFormatToken } from '../format/format';\r\nimport { Locale } from '../locale/locale.class';\r\nimport { weekOfYear } from './week-calendar-utils';\r\nimport { addRegexToken, match1to2, match2 } from '../parse/regex';\r\nimport { addUnitAlias } from './aliases';\r\nimport { addUnitPriority } from './priorities';\r\nimport { addWeekParseToken } from '../parse/token';\r\nimport { toInt } from '../utils/type-checks';\r\nimport { DateFormatterOptions, WeekParsing } from '../types';\r\nimport { DateParsingConfig } from '../create/parsing.types';\r\nimport { getLocale } from '../locale/locales';\r\nimport { add } from '../moment/add-subtract';\r\n\r\n// FORMATTING\r\n\r\nexport function initWeek() {\r\n  addFormatToken('w', ['ww', 2, false], 'wo',\r\n    function(date: Date, opts: DateFormatterOptions): string {\r\n      return getWeek(date, opts.locale)\r\n        .toString(10);\r\n    }\r\n  );\r\n\r\n  addFormatToken('W', ['WW', 2, false], 'Wo',\r\n    function(date: Date): string {\r\n      return getISOWeek(date)\r\n        .toString(10);\r\n    }\r\n  );\r\n\r\n// ALIASES\r\n\r\n  addUnitAlias('week', 'w');\r\n  addUnitAlias('isoWeek', 'W');\r\n\r\n// PRIORITIES\r\n\r\n  addUnitPriority('week', 5);\r\n  addUnitPriority('isoWeek', 5);\r\n\r\n// PARSING\r\n\r\n  addRegexToken('w', match1to2);\r\n  addRegexToken('ww', match1to2, match2);\r\n  addRegexToken('W', match1to2);\r\n  addRegexToken('WW', match1to2, match2);\r\n\r\n  addWeekParseToken(\r\n    ['w', 'ww', 'W', 'WW'],\r\n    function(input: string, week: WeekParsing, config: DateParsingConfig, token: string): DateParsingConfig {\r\n      week[token.substr(0, 1)] = toInt(input);\r\n\r\n      return config;\r\n    }\r\n  );\r\n\r\n// export function getSetWeek (input) {\r\n//   var week = this.localeData().week(this);\r\n//   return input == null ? week : this.add((input - week) * 7, 'd');\r\n// }\r\n}\r\n\r\nexport function setWeek(date: Date, input: number, locale = getLocale()): Date {\r\n  const week = getWeek(date, locale);\r\n\r\n  return add(date, (input - week) * 7, 'day');\r\n}\r\n\r\nexport function getWeek(date: Date, locale = getLocale(), isUTC?: boolean): number {\r\n  return locale.week(date, isUTC);\r\n}\r\n\r\n// export function getSetISOWeek (input) {\r\n//   var week = weekOfYear(this, 1, 4).week;\r\n//   return input == null ? week : this.add((input - week) * 7, 'd');\r\n// }\r\n\r\nexport function setISOWeek(date: Date, input: number): Date {\r\n  const week = getISOWeek(date);\r\n\r\n  return add(date, (input - week) * 7, 'day');\r\n}\r\n\r\nexport function getISOWeek(date: Date, isUTC?: boolean): number {\r\n  return weekOfYear(date, 1, 4, isUTC).week;\r\n}\r\n\r\n"]}