{"version":3,"file":"day-of-year.js","sourceRoot":"","sources":["../../../../../src/chronos/units/day-of-year.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,cAAc,EAAE,MAAM,kBAAkB,CAAC;AAClD,OAAO,EAAE,OAAO,EAAE,MAAM,uBAAuB,CAAC;AAChD,OAAO,EAAE,aAAa,EAAE,SAAS,EAAE,MAAM,EAAE,MAAM,gBAAgB,CAAC;AAClE,OAAO,EAAE,aAAa,EAAE,MAAM,gBAAgB,CAAC;AAC/C,OAAO,EAAE,eAAe,EAAE,MAAM,cAAc,CAAC;AAC/C,OAAO,EAAE,YAAY,EAAE,MAAM,WAAW,CAAC;AAGzC,OAAO,EAAE,KAAK,EAAE,MAAM,sBAAsB,CAAC;AAC7C,OAAO,EAAE,GAAG,EAAE,MAAM,wBAAwB,CAAC;AAG7C,MAAM,UAAU,aAAa;IAC7B,aAAa;IAEX,cAAc,CAAC,KAAK,EAAE,CAAC,MAAM,EAAE,CAAC,EAAE,KAAK,CAAC,EAAE,MAAM,EAC9C,UAAS,IAAU;QACjB,OAAO,YAAY,CAAC,IAAI,CAAC;aACtB,QAAQ,CAAC,EAAE,CAAC,CAAC;IAClB,CAAC,CACF,CAAC;IAGJ,UAAU;IAER,YAAY,CAAC,WAAW,EAAE,KAAK,CAAC,CAAC;IAEnC,WAAW;IAET,eAAe,CAAC,WAAW,EAAE,CAAC,CAAC,CAAC;IAEhC,aAAa,CAAC,KAAK,EAAE,SAAS,CAAC,CAAC;IAChC,aAAa,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;IAC9B,aAAa,CACX,CAAC,KAAK,EAAE,MAAM,CAAC,EACf,UAAS,KAAa,EAAE,KAAgB,EAAE,MAAyB;QACjE,MAAM,CAAC,UAAU,GAAG,KAAK,CAAC,KAAK,CAAC,CAAC;QAEjC,OAAO,MAAM,CAAC;IAChB,CAAC,CACF,CAAC;AACJ,CAAC;AAED,MAAM,UAAU,YAAY,CAAC,IAAU,EAAE,KAAe;IACtD,MAAM,KAAK,GAAG,CAAC,OAAO,CAAC,IAAI,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC;IAC3C,MAAM,KAAK,GAAG,CAAC,OAAO,CAAC,IAAI,EAAE,MAAM,EAAE,KAAK,CAAC,CAAC;IAC5C,MAAM,QAAQ,GAAG,KAAK,GAAG,KAAK,CAAC;IAC/B,MAAM,MAAM,GAAG,IAAI,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC;IAEnC,OAAO,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG,MAAM,CAAC,GAAG,CAAC,CAAC;AAC3C,CAAC;AAED,MAAM,UAAU,YAAY,CAAC,IAAU,EAAE,KAAa;IACpD,MAAM,SAAS,GAAG,YAAY,CAAC,IAAI,CAAC,CAAC;IAErC,OAAO,GAAG,CAAC,IAAI,EAAE,CAAC,KAAK,GAAG,SAAS,CAAC,EAAE,KAAK,CAAC,CAAC;AAC/C,CAAC","sourcesContent":["import { addFormatToken } from '../format/format';\r\nimport { startOf } from '../utils/start-end-of';\r\nimport { addRegexToken, match1to3, match3 } from '../parse/regex';\r\nimport { addParseToken } from '../parse/token';\r\nimport { addUnitPriority } from './priorities';\r\nimport { addUnitAlias } from './aliases';\r\nimport { DateArray, DateFormatterOptions } from '../types';\r\nimport { DateParsingConfig } from '../create/parsing.types';\r\nimport { toInt } from '../utils/type-checks';\r\nimport { add } from '../moment/add-subtract';\r\n\r\n\r\nexport function initDayOfYear() {\r\n// FORMATTING\r\n\r\n  addFormatToken('DDD', ['DDDD', 3, false], 'DDDo',\r\n    function(date: Date): string {\r\n      return getDayOfYear(date)\r\n        .toString(10);\r\n    }\r\n  );\r\n\r\n\r\n// ALIASES\r\n\r\n  addUnitAlias('dayOfYear', 'DDD');\r\n\r\n// PRIORITY\r\n\r\n  addUnitPriority('dayOfYear', 4);\r\n\r\n  addRegexToken('DDD', match1to3);\r\n  addRegexToken('DDDD', match3);\r\n  addParseToken(\r\n    ['DDD', 'DDDD'],\r\n    function(input: string, array: DateArray, config: DateParsingConfig): DateParsingConfig {\r\n      config._dayOfYear = toInt(input);\r\n\r\n      return config;\r\n    }\r\n  );\r\n}\r\n\r\nexport function getDayOfYear(date: Date, isUTC?: boolean): number {\r\n  const date1 = +startOf(date, 'day', isUTC);\r\n  const date2 = +startOf(date, 'year', isUTC);\r\n  const someDate = date1 - date2;\r\n  const oneDay = 1000 * 60 * 60 * 24;\r\n\r\n  return Math.round(someDate / oneDay) + 1;\r\n}\r\n\r\nexport function setDayOfYear(date: Date, input: number): Date {\r\n  const dayOfYear = getDayOfYear(date);\r\n\r\n  return add(date, (input - dayOfYear), 'day');\r\n}\r\n"]}