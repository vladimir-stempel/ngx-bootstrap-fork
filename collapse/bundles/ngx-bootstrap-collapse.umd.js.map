{"version":3,"file":"ngx-bootstrap-collapse.umd.js","sources":["../../../../src/collapse/collapse-animations.ts","../../../../src/collapse/collapse.directive.ts","../../../../src/collapse/collapse.module.ts","../../../../src/collapse/ngx-bootstrap-collapse.ts"],"sourcesContent":["import {\r\n  animate,\r\n  style,\r\n  AnimationMetadata\r\n} from '@angular/animations';\r\n\r\nexport const COLLAPSE_ANIMATION_TIMING = '400ms cubic-bezier(0.4,0.0,0.2,1)';\r\n\r\nexport const expandAnimation: AnimationMetadata[] = [\r\n  style({ height: 0, visibility: 'hidden' }),\r\n  animate(\r\n    COLLAPSE_ANIMATION_TIMING,\r\n    style({ height: '*', visibility: 'visible' })\r\n  )\r\n];\r\n\r\nexport const collapseAnimation: AnimationMetadata[] = [\r\n  style({ height: '*', visibility: 'visible' }),\r\n  animate(\r\n    COLLAPSE_ANIMATION_TIMING,\r\n    style({ height: 0, visibility: 'hidden' })\r\n  )\r\n];\r\n","import {\r\n  AnimationBuilder,\r\n  AnimationFactory,\r\n  AnimationPlayer\r\n} from '@angular/animations';\r\n\r\nimport {\r\n  AfterViewChecked,\r\n  Directive,\r\n  ElementRef,\r\n  EventEmitter,\r\n  HostBinding,\r\n  Input,\r\n  Output,\r\n  Renderer2\r\n} from '@angular/core';\r\n\r\nimport {\r\n  collapseAnimation,\r\n  expandAnimation\r\n} from './collapse-animations';\r\n\r\n@Directive({\r\n  selector: '[collapse]',\r\n  exportAs: 'bs-collapse',\r\n  // eslint-disable-next-line @angular-eslint/no-host-metadata-property\r\n  host: {\r\n    '[class.collapse]': 'true'\r\n  }\r\n})\r\nexport class CollapseDirective implements AfterViewChecked {\r\n  /** This event fires as soon as content collapses */\r\n  @Output() collapsed: EventEmitter<CollapseDirective> = new EventEmitter();\r\n  /** This event fires when collapsing is started */\r\n  @Output() collapses: EventEmitter<CollapseDirective> = new EventEmitter();\r\n  /** This event fires as soon as content becomes visible */\r\n  @Output() expanded: EventEmitter<CollapseDirective> = new EventEmitter();\r\n  /** This event fires when expansion is started */\r\n  @Output() expands: EventEmitter<CollapseDirective> = new EventEmitter();\r\n  // shown\r\n  @HostBinding('class.in')\r\n  @HostBinding('class.show')\r\n  @HostBinding('attr.aria-expanded')\r\n  isExpanded = true;\r\n  collapseNewValue = true;\r\n  // hidden\r\n  @HostBinding('attr.aria-hidden') isCollapsed = false;\r\n  // stale state\r\n  @HostBinding('class.collapse') isCollapse = true;\r\n  // animation state\r\n  @HostBinding('class.collapsing') isCollapsing = false;\r\n\r\n  @Input()\r\n  set display(value: string) {\r\n    if (!this.isAnimated) {\r\n      this._renderer.setStyle(this._el.nativeElement, 'display', value);\r\n\r\n      return;\r\n    }\r\n\r\n    this._display = value;\r\n\r\n    if (value === 'none') {\r\n      this.hide();\r\n\r\n      return;\r\n    }\r\n\r\n    this.show();\r\n  }\r\n  /** turn on/off animation */\r\n  @Input() isAnimated = false;\r\n  /** A flag indicating visibility of content (shown or hidden) */\r\n  @Input()\r\n  set collapse(value: boolean) {\r\n    this.collapseNewValue = value;\r\n    if (!this._player || this._isAnimationDone) {\r\n      this.isExpanded = value;\r\n      this.toggle();\r\n    }\r\n  }\r\n\r\n  get collapse(): boolean {\r\n    return this.isExpanded;\r\n  }\r\n\r\n  private _display = 'block';\r\n  private _factoryCollapseAnimation: AnimationFactory;\r\n  private _factoryExpandAnimation: AnimationFactory;\r\n  private _isAnimationDone: boolean;\r\n  private _player: AnimationPlayer;\r\n  private _stylesLoaded = false;\r\n\r\n  private _COLLAPSE_ACTION_NAME = 'collapse';\r\n  private _EXPAND_ACTION_NAME = 'expand';\r\n\r\n  constructor(\r\n    private _el: ElementRef,\r\n    private _renderer: Renderer2,\r\n    _builder: AnimationBuilder\r\n  ) {\r\n    this._factoryCollapseAnimation = _builder.build(collapseAnimation);\r\n    this._factoryExpandAnimation = _builder.build(expandAnimation);\r\n  }\r\n\r\n  ngAfterViewChecked(): void {\r\n    this._stylesLoaded = true;\r\n\r\n    if (!this._player || !this._isAnimationDone) {\r\n      return;\r\n    }\r\n\r\n    this._player.reset();\r\n    this._renderer.setStyle(this._el.nativeElement, 'height', '*');\r\n  }\r\n\r\n  /** allows to manually toggle content visibility */\r\n  toggle(): void {\r\n    if (this.isExpanded) {\r\n      this.hide();\r\n    } else {\r\n      this.show();\r\n    }\r\n  }\r\n\r\n  /** allows to manually hide content */\r\n  hide(): void {\r\n    this.isCollapsing = true;\r\n    this.isExpanded = false;\r\n    this.isCollapsed = true;\r\n    this.isCollapsing = false;\r\n\r\n    this.collapses.emit(this);\r\n\r\n    this._isAnimationDone = false;\r\n\r\n    this.animationRun(this.isAnimated, this._COLLAPSE_ACTION_NAME)(() => {\r\n      this._isAnimationDone = true;\r\n      if (this.collapseNewValue !== this.isCollapsed && this.isAnimated) {\r\n        this.show();\r\n\r\n        return;\r\n      }\r\n      this.collapsed.emit(this);\r\n      this._renderer.setStyle(this._el.nativeElement, 'display', 'none');\r\n    });\r\n  }\r\n  /** allows to manually show collapsed content */\r\n  show(): void {\r\n    this._renderer.setStyle(this._el.nativeElement, 'display', this._display);\r\n\r\n    this.isCollapsing = true;\r\n    this.isExpanded = true;\r\n    this.isCollapsed = false;\r\n    this.isCollapsing = false;\r\n\r\n    this.expands.emit(this);\r\n\r\n    this._isAnimationDone = false;\r\n    this.animationRun(this.isAnimated, this._EXPAND_ACTION_NAME)(() => {\r\n      this._isAnimationDone = true;\r\n      if (this.collapseNewValue !== this.isCollapsed && this.isAnimated) {\r\n        this.hide();\r\n\r\n        return;\r\n      }\r\n      this.expanded.emit(this);\r\n      this._renderer.removeStyle(this._el.nativeElement, 'overflow');\r\n    });\r\n  }\r\n\r\n  animationRun(isAnimated: boolean, action: string) {\r\n    if (!isAnimated || !this._stylesLoaded) {\r\n      return (callback: () => void) => callback();\r\n    }\r\n\r\n    this._renderer.setStyle(this._el.nativeElement, 'overflow', 'hidden');\r\n    this._renderer.addClass(this._el.nativeElement, 'collapse');\r\n\r\n    const factoryAnimation = (action === this._EXPAND_ACTION_NAME)\r\n      ? this._factoryExpandAnimation\r\n      : this._factoryCollapseAnimation;\r\n\r\n    if (this._player) {\r\n      this._player.destroy();\r\n    }\r\n\r\n    this._player = factoryAnimation.create(this._el.nativeElement);\r\n    this._player.play();\r\n\r\n    return (callback: () => void) => this._player.onDone(callback);\r\n  }\r\n}\r\n","import { NgModule, ModuleWithProviders } from '@angular/core';\r\n\r\nimport { CollapseDirective } from './collapse.directive';\r\n\r\n@NgModule({\r\n  declarations: [CollapseDirective],\r\n  exports: [CollapseDirective]\r\n})\r\nexport class CollapseModule {\r\n  static forRoot(): ModuleWithProviders<CollapseModule> {\r\n    return { ngModule: CollapseModule, providers: [] };\r\n  }\r\n}\r\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":["style","animate","EventEmitter","Directive","Output","HostBinding","Input","NgModule"],"mappings":"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"}