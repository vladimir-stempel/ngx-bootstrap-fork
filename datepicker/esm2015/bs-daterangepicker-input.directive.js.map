{"version":3,"file":"bs-daterangepicker-input.directive.js","sourceRoot":"","sources":["../../../../src/datepicker/bs-daterangepicker-input.directive.ts"],"names":[],"mappings":"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","sourcesContent":["import {\r\n  ChangeDetectorRef,\r\n  Directive,\r\n  ElementRef,\r\n  forwardRef,\r\n  Host,\r\n  OnDestroy,\r\n  OnInit,\r\n  Provider,\r\n  Renderer2\r\n} from '@angular/core';\r\n\r\nimport {\r\n  AbstractControl,\r\n  ControlValueAccessor,\r\n  NG_VALIDATORS,\r\n  NG_VALUE_ACCESSOR,\r\n  ValidationErrors,\r\n  Validator\r\n} from '@angular/forms';\r\n\r\nimport {\r\n  parseDate,\r\n  formatDate,\r\n  getLocale,\r\n  isAfter,\r\n  isBefore,\r\n  isArray,\r\n  isDateValid,\r\n  utcAsLocal\r\n} from 'ngx-bootstrap/chronos';\r\n\r\nimport { BsDaterangepickerDirective } from './bs-daterangepicker.component';\r\nimport { BsLocaleService } from './bs-locale.service';\r\nimport { Subscription } from 'rxjs';\r\nimport { distinctUntilChanged } from 'rxjs/operators';\r\n\r\nconst BS_DATERANGEPICKER_VALUE_ACCESSOR: Provider = {\r\n  provide: NG_VALUE_ACCESSOR,\r\n    useExisting: forwardRef(() => BsDaterangepickerInputDirective),\r\n  multi: true\r\n};\r\n\r\nconst BS_DATERANGEPICKER_VALIDATOR: Provider = {\r\n  provide: NG_VALIDATORS,\r\n  useExisting: forwardRef(() => BsDaterangepickerInputDirective),\r\n  multi: true\r\n};\r\n\r\n\r\n@Directive({\r\n  selector: `input[bsDaterangepicker]`,\r\n  // eslint-disable-next-line @angular-eslint/no-host-metadata-property\r\n  host: {\r\n    '(change)': 'onChange($event)',\r\n    '(keyup.esc)': 'hide()',\r\n    '(keydown)': 'onKeydownEvent($event)',\r\n    '(blur)': 'onBlur()'\r\n  },\r\n  providers: [BS_DATERANGEPICKER_VALUE_ACCESSOR, BS_DATERANGEPICKER_VALIDATOR]\r\n})\r\nexport class BsDaterangepickerInputDirective\r\n  implements ControlValueAccessor, Validator, OnInit, OnDestroy {\r\n  private _onChange = Function.prototype;\r\n  private _onTouched = Function.prototype;\r\n  private _validatorChange = Function.prototype;\r\n  private _value: Date[];\r\n  private _subs = new Subscription();\r\n\r\n  constructor(@Host() private _picker: BsDaterangepickerDirective,\r\n              private _localeService: BsLocaleService,\r\n              private _renderer: Renderer2,\r\n              private _elRef: ElementRef,\r\n              private changeDetection: ChangeDetectorRef) {\r\n  }\r\n\r\n  ngOnInit() {\r\n    // update input value on datepicker value update\r\n    this._subs.add(\r\n      this._picker.bsValueChange.subscribe((value: Date[]) => {\r\n        this._setInputValue(value);\r\n        if (this._value !== value) {\r\n          this._value = value;\r\n          this._onChange(value);\r\n          this._onTouched();\r\n        }\r\n        this.changeDetection.markForCheck();\r\n      }));\r\n\r\n    // update input value on locale change\r\n    this._subs.add(this._localeService.localeChange.subscribe(() => {\r\n      this._setInputValue(this._value);\r\n    }));\r\n\r\n    this._subs.add(\r\n      // update input value on format change\r\n      this._picker.rangeInputFormat$.pipe(distinctUntilChanged()).subscribe(() => {\r\n        this._setInputValue(this._value);\r\n      }));\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this._subs.unsubscribe();\r\n  }\r\n\r\n  onKeydownEvent(event) {\r\n    if (event.keyCode === 13 || event.code === 'Enter') {\r\n      this.hide();\r\n    }\r\n  }\r\n\r\n  _setInputValue(date: Date[]): void {\r\n    let range = '';\r\n    if (date) {\r\n      const start: string = !date[0] ? ''\r\n        : formatDate(date[0],\r\n          this._picker._config.rangeInputFormat,\r\n          this._localeService.currentLocale\r\n        );\r\n      const end: string = !date[1] ? ''\r\n        : formatDate(\r\n          date[1],\r\n          this._picker._config.rangeInputFormat,\r\n          this._localeService.currentLocale\r\n        );\r\n      range = (start && end) ? start + this._picker._config.rangeSeparator + end : '';\r\n    }\r\n    this._renderer.setProperty(this._elRef.nativeElement, 'value', range);\r\n  }\r\n\r\n  onChange(event: Event) {\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    this.writeValue((event.target as any).value);\r\n    this._onChange(this._value);\r\n    if (this._picker._config.returnFocusToInput) {\r\n      this._renderer.selectRootElement(this._elRef.nativeElement).focus();\r\n    }\r\n    this._onTouched();\r\n  }\r\n\r\n  validate(c: AbstractControl): ValidationErrors | null {\r\n    const _value: [Date, Date] = c.value;\r\n    const errors: Record<string, unknown>[] = [];\r\n\r\n    if (_value === null || _value === undefined || !isArray(_value)) {\r\n      return null;\r\n    }\r\n\r\n    _value.sort((a, b) => a.getTime() - b.getTime());\r\n\r\n    const _isFirstDateValid = isDateValid(_value[0]);\r\n    const _isSecondDateValid = isDateValid(_value[1]);\r\n\r\n    if (!_isFirstDateValid) {\r\n      return { bsDate: { invalid: _value[0] } };\r\n    }\r\n\r\n    if (!_isSecondDateValid) {\r\n      return { bsDate: { invalid: _value[1] } };\r\n    }\r\n\r\n    if (this._picker && this._picker.minDate && isBefore(_value[0], this._picker.minDate, 'date')) {\r\n      _value[0] = this._picker.minDate;\r\n      errors.push({ bsDate: { minDate: this._picker.minDate } });\r\n    }\r\n\r\n    if (this._picker && this._picker.maxDate && isAfter(_value[1], this._picker.maxDate, 'date')) {\r\n      _value[1] = this._picker.maxDate;\r\n      errors.push({ bsDate: { maxDate: this._picker.maxDate } });\r\n    }\r\n    if (errors.length > 0) {\r\n      this.writeValue(_value);\r\n\r\n      return errors;\r\n    }\r\n  }\r\n\r\n  registerOnValidatorChange(fn: () => void): void {\r\n    this._validatorChange = fn;\r\n  }\r\n\r\n  writeValue(value: Date[] | string) {\r\n    if (!value) {\r\n      this._value = null;\r\n    } else {\r\n      const _localeKey = this._localeService.currentLocale;\r\n      const _locale = getLocale(_localeKey);\r\n      if (!_locale) {\r\n        throw new Error(\r\n          `Locale \"${_localeKey}\" is not defined, please add it with \"defineLocale(...)\"`\r\n        );\r\n      }\r\n\r\n      let _input: (string | Date)[] = [];\r\n      if (typeof value === 'string') {\r\n        const trimmedSeparator = this._picker._config.rangeSeparator.trim();\r\n        _input = value\r\n          .split(trimmedSeparator.length > 0 ? trimmedSeparator : this._picker._config.rangeSeparator)\r\n          .map(_val => _val.trim());\r\n      }\r\n\r\n      if (Array.isArray(value)) {\r\n        _input = value;\r\n      }\r\n\r\n      this._value = _input\r\n        .map((_val: string | Date): Date => {\r\n            if (this._picker._config.useUtc) {\r\n              return utcAsLocal(\r\n                parseDate(_val, this._picker._config.rangeInputFormat, this._localeService.currentLocale)\r\n              );\r\n            }\r\n\r\n            return parseDate(_val, this._picker._config.rangeInputFormat, this._localeService.currentLocale);\r\n          }\r\n        )\r\n        .map((date: Date) => (isNaN(date.valueOf()) ? null : date));\r\n    }\r\n\r\n    this._picker.bsValue = this._value;\r\n  }\r\n\r\n  setDisabledState(isDisabled: boolean): void {\r\n    this._picker.isDisabled = isDisabled;\r\n    if (isDisabled) {\r\n      this._renderer.setAttribute(this._elRef.nativeElement, 'disabled', 'disabled');\r\n\r\n      return;\r\n    }\r\n    this._renderer.removeAttribute(this._elRef.nativeElement, 'disabled');\r\n  }\r\n\r\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n  registerOnChange(fn: () => void): void {\r\n    this._onChange = fn;\r\n  }\r\n\r\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n  registerOnTouched(fn: () => void): void {\r\n    this._onTouched = fn;\r\n  }\r\n\r\n  onBlur() {\r\n    this._onTouched();\r\n  }\r\n\r\n  hide() {\r\n    this._picker.hide();\r\n    this._renderer.selectRootElement(this._elRef.nativeElement).blur();\r\n\r\n    if (this._picker._config.returnFocusToInput) {\r\n      this._renderer.selectRootElement(this._elRef.nativeElement).focus();\r\n    }\r\n  }\r\n}\r\n"]}