{"version":3,"file":"datepicker-inner.component.js","sourceRoot":"","sources":["../../../../src/datepicker/datepicker-inner.component.ts"],"names":[],"mappings":"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","sourcesContent":["import {\r\n  Component,\r\n  EventEmitter,\r\n  Input,\r\n  OnChanges,\r\n  OnInit,\r\n  Output,\r\n  SimpleChanges\r\n} from '@angular/core';\r\n\r\nimport { DateFormatter } from './date-formatter';\r\n\r\ntype CompareDatesFn = (date1: Date, date2: Date) => number;\r\n\r\n@Component({\r\n  selector: 'datepicker-inner',\r\n  template: `\r\n    <!--&lt;!&ndash;ng-keydown=\"keydown($event)\"&ndash;&gt;-->\r\n    <div *ngIf=\"datepickerMode\" class=\"well well-sm bg-faded p-a card\" role=\"application\" >\r\n      <ng-content></ng-content>\r\n    </div>\r\n  `\r\n})\r\nexport class DatePickerInnerComponent implements OnInit, OnChanges {\r\n  @Input() locale: string;\r\n  @Input() datepickerMode: string;\r\n  @Input() startingDay: number;\r\n  @Input() yearRange: number;\r\n\r\n  @Input() minDate: Date;\r\n  @Input() maxDate: Date;\r\n  @Input() minMode: string;\r\n  @Input() maxMode: string;\r\n  @Input() showWeeks: boolean;\r\n  @Input() formatDay: string;\r\n  @Input() formatMonth: string;\r\n  @Input() formatYear: string;\r\n  @Input() formatDayHeader: string;\r\n  @Input() formatDayTitle: string;\r\n  @Input() formatMonthTitle: string;\r\n  @Input() onlyCurrentMonth: boolean;\r\n  @Input() shortcutPropagation: boolean;\r\n  @Input() customClass: { date: Date; mode: string; clazz: string }[];\r\n  @Input() monthColLimit: number;\r\n  @Input() yearColLimit: number;\r\n  @Input() dateDisabled: { date: Date; mode: string }[];\r\n  @Input() dayDisabled: number[];\r\n  @Input() initDate: Date;\r\n\r\n  @Output() selectionDone: EventEmitter<Date> = new EventEmitter<Date>(undefined);\r\n  @Output() update: EventEmitter<Date> = new EventEmitter<Date>(false);\r\n  @Output() activeDateChange: EventEmitter<Date> = new EventEmitter<Date>(undefined);\r\n\r\n  stepDay = {};\r\n  stepMonth = {};\r\n  stepYear = {};\r\n\r\n  uniqueId: string;\r\n\r\n  protected modes: string[] = ['day', 'month', 'year'];\r\n  protected dateFormatter: DateFormatter = new DateFormatter();\r\n  protected _activeDate: Date;\r\n  protected selectedDate: Date;\r\n  protected activeDateId: string;\r\n\r\n  protected refreshViewHandlerDay: () => void;\r\n  protected compareHandlerDay: CompareDatesFn;\r\n  protected refreshViewHandlerMonth: () => void;\r\n  protected compareHandlerMonth: CompareDatesFn;\r\n  protected refreshViewHandlerYear: () => void;\r\n  protected compareHandlerYear: CompareDatesFn;\r\n\r\n  @Input()\r\n  get activeDate(): Date {\r\n    return this._activeDate;\r\n  }\r\n\r\n  set activeDate(value: Date) {\r\n    this._activeDate = value;\r\n  }\r\n\r\n  // todo: add formatter value to Date object\r\n  ngOnInit(): void {\r\n    // todo: use date for unique value\r\n    this.uniqueId =  `datepicker--${Math.floor(Math.random() * 10000)}`;\r\n\r\n    if (this.initDate) {\r\n      this.activeDate = this.initDate;\r\n      this.selectedDate = new Date(this.activeDate.valueOf());\r\n      this.update.emit(this.activeDate);\r\n    } else if (this.activeDate === undefined) {\r\n      this.activeDate = new Date();\r\n    }\r\n  }\r\n\r\n  // this.refreshView should be called here to reflect the changes on the fly\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    this.refreshView();\r\n    this.checkIfActiveDateGotUpdated(changes.activeDate);\r\n  }\r\n\r\n  // Check if activeDate has been update and then emit the activeDateChange with the new date\r\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n  checkIfActiveDateGotUpdated(activeDate: any): void {\r\n    if (activeDate && !activeDate.firstChange) {\r\n      const previousValue = activeDate.previousValue;\r\n      if (\r\n        previousValue &&\r\n        previousValue instanceof Date &&\r\n        previousValue.getTime() !== activeDate.currentValue.getTime()\r\n      ) {\r\n        this.activeDateChange.emit(this.activeDate);\r\n      }\r\n    }\r\n  }\r\n\r\n  setCompareHandler(handler: CompareDatesFn, type: string): void {\r\n    if (type === 'day') {\r\n      this.compareHandlerDay = handler;\r\n    }\r\n\r\n    if (type === 'month') {\r\n      this.compareHandlerMonth = handler;\r\n    }\r\n\r\n    if (type === 'year') {\r\n      this.compareHandlerYear = handler;\r\n    }\r\n  }\r\n\r\n  compare(date1: Date, date2: Date): number | undefined {\r\n    if (date1 === undefined || date2 === undefined) {\r\n      return undefined;\r\n    }\r\n\r\n    if (this.datepickerMode === 'day' && this.compareHandlerDay) {\r\n      return this.compareHandlerDay(date1, date2);\r\n    }\r\n\r\n    if (this.datepickerMode === 'month' && this.compareHandlerMonth) {\r\n      return this.compareHandlerMonth(date1, date2);\r\n    }\r\n\r\n    if (this.datepickerMode === 'year' && this.compareHandlerYear) {\r\n      return this.compareHandlerYear(date1, date2);\r\n    }\r\n\r\n    return void 0;\r\n  }\r\n\r\n  setRefreshViewHandler(handler: () => void, type: string): void {\r\n    if (type === 'day') {\r\n      this.refreshViewHandlerDay = handler;\r\n    }\r\n\r\n    if (type === 'month') {\r\n      this.refreshViewHandlerMonth = handler;\r\n    }\r\n\r\n    if (type === 'year') {\r\n      this.refreshViewHandlerYear = handler;\r\n    }\r\n  }\r\n\r\n  refreshView(): void {\r\n    if (this.datepickerMode === 'day' && this.refreshViewHandlerDay) {\r\n      this.refreshViewHandlerDay();\r\n    }\r\n\r\n    if (this.datepickerMode === 'month' && this.refreshViewHandlerMonth) {\r\n      this.refreshViewHandlerMonth();\r\n    }\r\n\r\n    if (this.datepickerMode === 'year' && this.refreshViewHandlerYear) {\r\n      this.refreshViewHandlerYear();\r\n    }\r\n  }\r\n\r\n  dateFilter(date: Date, format: string): string {\r\n    return this.dateFormatter.format(date, format, this.locale);\r\n  }\r\n\r\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n  isActive(dateObject: any): boolean {\r\n    if (this.compare(dateObject.date, this.activeDate) === 0) {\r\n      this.activeDateId = dateObject.uid;\r\n\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n  createDateObject(date: Date, format: string): any {\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    const dateObject: any = {};\r\n    dateObject.date = new Date(\r\n      date.getFullYear(),\r\n      date.getMonth(),\r\n      date.getDate()\r\n    );\r\n    dateObject.date = this.fixTimeZone(dateObject.date);\r\n    dateObject.label = this.dateFilter(date, format);\r\n    dateObject.selected = this.compare(date, this.selectedDate) === 0;\r\n    dateObject.disabled = this.isDisabled(date);\r\n    dateObject.current = this.compare(date, new Date()) === 0;\r\n    dateObject.customClass = this.getCustomClassForDate(dateObject.date);\r\n\r\n    return dateObject;\r\n  }\r\n\r\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n  split(arr: any[], size: number): any[] {\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    const arrays: any[] = [];\r\n    while (arr.length > 0) {\r\n      arrays.push(arr.splice(0, size));\r\n    }\r\n\r\n    return arrays;\r\n  }\r\n\r\n  // Fix a hard-reproducible bug with timezones\r\n  // The bug depends on OS, browser, current timezone and current date\r\n  // i.e.\r\n  // var date = new Date(2014, 0, 1);\r\n  // console.log(date.getFullYear(), date.getMonth(), date.getDate(),\r\n  // date.getHours()); can result in \"2013 11 31 23\" because of the bug.\r\n  fixTimeZone(date: Date): Date {\r\n    const hours = date.getHours();\r\n\r\n    return new Date(\r\n      date.getFullYear(),\r\n      date.getMonth(),\r\n      date.getDate(),\r\n      hours === 23 ? hours + 2 : 0\r\n    );\r\n  }\r\n\r\n  select(date: Date, isManual = true): void {\r\n    if (this.datepickerMode === this.minMode) {\r\n      if (!this.activeDate) {\r\n        this.activeDate = new Date(0, 0, 0, 0, 0, 0, 0);\r\n      }\r\n\r\n      this.activeDate = new Date(\r\n        date.getFullYear(),\r\n        date.getMonth(),\r\n        date.getDate()\r\n      );\r\n      this.activeDate = this.fixTimeZone(this.activeDate);\r\n      if (isManual) {\r\n        this.selectionDone.emit(this.activeDate);\r\n      }\r\n    } else {\r\n      this.activeDate = new Date(\r\n        date.getFullYear(),\r\n        date.getMonth(),\r\n        date.getDate()\r\n      );\r\n      this.activeDate = this.fixTimeZone(this.activeDate);\r\n      if (isManual) {\r\n        this.datepickerMode = this.modes[\r\n          this.modes.indexOf(this.datepickerMode) - 1\r\n        ];\r\n      }\r\n    }\r\n\r\n    this.selectedDate = new Date(this.activeDate.valueOf());\r\n    this.update.emit(this.activeDate);\r\n    this.refreshView();\r\n  }\r\n\r\n  move(direction: number): void {\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    let expectedStep: any;\r\n    if (this.datepickerMode === 'day') {\r\n      expectedStep = this.stepDay;\r\n    }\r\n\r\n    if (this.datepickerMode === 'month') {\r\n      expectedStep = this.stepMonth;\r\n    }\r\n\r\n    if (this.datepickerMode === 'year') {\r\n      expectedStep = this.stepYear;\r\n    }\r\n\r\n    if (expectedStep) {\r\n      const year =\r\n        this.activeDate.getFullYear() + direction * (expectedStep.years || 0);\r\n      const month =\r\n        this.activeDate.getMonth() + direction * (expectedStep.months || 0);\r\n      this.activeDate = new Date(year, month, 1);\r\n\r\n      this.refreshView();\r\n      this.activeDateChange.emit(this.activeDate);\r\n    }\r\n  }\r\n\r\n  toggleMode(_direction: number): void {\r\n    const direction = _direction || 1;\r\n\r\n    if (\r\n      (this.datepickerMode === this.maxMode && direction === 1) ||\r\n      (this.datepickerMode === this.minMode && direction === -1)\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    this.datepickerMode = this.modes[\r\n      this.modes.indexOf(this.datepickerMode) + direction\r\n    ];\r\n    this.refreshView();\r\n  }\r\n\r\n  protected getCustomClassForDate(date: Date): string {\r\n    if (!this.customClass) {\r\n      return '';\r\n    }\r\n    // todo: build a hash of custom classes, it will work faster\r\n    const customClassObject: {\r\n      date: Date;\r\n      mode: string;\r\n      clazz: string;\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    } = this.customClass.find((customClass: any) => {\r\n      return (\r\n        customClass.date.valueOf() === date.valueOf() &&\r\n        customClass.mode === this.datepickerMode\r\n      );\r\n    }, this);\r\n\r\n    return customClassObject === undefined ? '' : customClassObject.clazz;\r\n  }\r\n\r\n  protected compareDateDisabled(\r\n    date1Disabled: { date: Date; mode: string },\r\n    date2: Date\r\n  ): number {\r\n    if (date1Disabled === undefined || date2 === undefined) {\r\n      return undefined;\r\n    }\r\n\r\n    if (date1Disabled.mode === 'day' && this.compareHandlerDay) {\r\n      return this.compareHandlerDay(date1Disabled.date, date2);\r\n    }\r\n\r\n    if (date1Disabled.mode === 'month' && this.compareHandlerMonth) {\r\n      return this.compareHandlerMonth(date1Disabled.date, date2);\r\n    }\r\n\r\n    if (date1Disabled.mode === 'year' && this.compareHandlerYear) {\r\n      return this.compareHandlerYear(date1Disabled.date, date2);\r\n    }\r\n\r\n    return undefined;\r\n  }\r\n\r\n  protected isDisabled(date: Date): boolean {\r\n    let isDateDisabled = false;\r\n    if (this.dateDisabled) {\r\n      this.dateDisabled.forEach(\r\n        (disabledDate: { date: Date; mode: string }) => {\r\n          if (this.compareDateDisabled(disabledDate, date) === 0) {\r\n            isDateDisabled = true;\r\n          }\r\n        }\r\n      );\r\n    }\r\n\r\n    if (this.dayDisabled) {\r\n      isDateDisabled =\r\n        isDateDisabled ||\r\n        this.dayDisabled.indexOf(date.getDay()) > -1;\r\n    }\r\n\r\n    return (\r\n      isDateDisabled ||\r\n      (this.minDate && this.compare(date, this.minDate) < 0) ||\r\n      (this.maxDate && this.compare(date, this.maxDate) > 0)\r\n    );\r\n  }\r\n}\r\n"]}