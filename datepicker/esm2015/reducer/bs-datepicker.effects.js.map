{"version":3,"file":"bs-datepicker.effects.js","sourceRoot":"","sources":["../../../../../src/datepicker/reducer/bs-datepicker.effects.ts"],"names":[],"mappings":"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","sourcesContent":["import { Injectable } from '@angular/core';\r\n\r\nimport { Observable, Subscription } from 'rxjs';\r\nimport { filter, map } from 'rxjs/operators';\r\n\r\nimport { BsDatepickerAbstractComponent } from '../base/bs-datepicker-container';\r\nimport { BsDatepickerActions } from './bs-datepicker.actions';\r\nimport { BsDatepickerConfig } from '../bs-datepicker.config';\r\nimport { BsDatepickerStore } from './bs-datepicker.store';\r\nimport { BsLocaleService } from '../bs-locale.service';\r\n\r\nimport {\r\n  BsDatepickerViewMode,\r\n  BsNavigationEvent,\r\n  CellHoverEvent,\r\n  DatepickerRenderOptions,\r\n  DatepickerDateCustomClasses,\r\n  DatepickerDateTooltipText,\r\n  DaysCalendarViewModel,\r\n  DayViewModel,\r\n  MonthsCalendarViewModel,\r\n  YearsCalendarViewModel\r\n} from '../models';\r\n\r\n\r\n@Injectable()\r\nexport class BsDatepickerEffects {\r\n  viewMode: Observable<BsDatepickerViewMode>;\r\n  daysCalendar: Observable<DaysCalendarViewModel[]>;\r\n  monthsCalendar: Observable<MonthsCalendarViewModel[]>;\r\n  yearsCalendar: Observable<YearsCalendarViewModel[]>;\r\n  options: Observable<DatepickerRenderOptions>;\r\n\r\n  private _store: BsDatepickerStore;\r\n  private _subs: Subscription[] = [];\r\n\r\n  constructor(private _actions: BsDatepickerActions,\r\n              private _localeService: BsLocaleService) {}\r\n\r\n  init(_bsDatepickerStore: BsDatepickerStore): BsDatepickerEffects {\r\n    this._store = _bsDatepickerStore;\r\n\r\n    return this;\r\n  }\r\n\r\n  /** setters */\r\n\r\n  setValue(value: Date): void {\r\n    this._store.dispatch(this._actions.select(value));\r\n  }\r\n\r\n  setRangeValue(value: Date[]): void {\r\n    this._store.dispatch(this._actions.selectRange(value));\r\n  }\r\n\r\n  setMinDate(value: Date): BsDatepickerEffects {\r\n    this._store.dispatch(this._actions.minDate(value));\r\n\r\n    return this;\r\n  }\r\n\r\n  setMaxDate(value: Date): BsDatepickerEffects {\r\n    this._store.dispatch(this._actions.maxDate(value));\r\n\r\n    return this;\r\n  }\r\n\r\n  setDaysDisabled(value: number[]): BsDatepickerEffects  {\r\n    this._store.dispatch(this._actions.daysDisabled(value));\r\n\r\n    return this;\r\n  }\r\n\r\n  setDatesDisabled(value: Date[]): BsDatepickerEffects  {\r\n    this._store.dispatch(this._actions.datesDisabled(value));\r\n\r\n    return this;\r\n  }\r\n\r\n  setDatesEnabled(value: Date[]): BsDatepickerEffects {\r\n    this._store.dispatch(this._actions.datesEnabled(value));\r\n\r\n    return this;\r\n  }\r\n\r\n  setDisabled(value: boolean): BsDatepickerEffects {\r\n    this._store.dispatch(this._actions.isDisabled(value));\r\n\r\n    return this;\r\n  }\r\n\r\n  setDateCustomClasses(value: DatepickerDateCustomClasses[]): BsDatepickerEffects {\r\n    this._store.dispatch(this._actions.setDateCustomClasses(value));\r\n\r\n    return this;\r\n  }\r\n\r\n  setDateTooltipTexts(value: DatepickerDateTooltipText[]): BsDatepickerEffects {\r\n    this._store.dispatch(this._actions.setDateTooltipTexts(value));\r\n\r\n    return this;\r\n  }\r\n\r\n  /* Set rendering options */\r\n  setOptions(_config: BsDatepickerConfig): BsDatepickerEffects {\r\n    const _options = Object.assign({locale: this._localeService.currentLocale}, _config);\r\n    this._store.dispatch(this._actions.setOptions(_options));\r\n\r\n    return this;\r\n  }\r\n\r\n  /** view to mode bindings */\r\n  setBindings(container: BsDatepickerAbstractComponent): BsDatepickerEffects {\r\n    container.daysCalendar = this._store\r\n      .select(state => state.flaggedMonths)\r\n      .pipe(\r\n        filter(months => !!months)\r\n      );\r\n\r\n    // month calendar\r\n    container.monthsCalendar = this._store\r\n      .select(state => state.flaggedMonthsCalendar)\r\n      .pipe(\r\n        filter(months => !!months)\r\n      );\r\n\r\n    // year calendar\r\n    container.yearsCalendar = this._store\r\n      .select(state => state.yearsCalendarFlagged)\r\n      .pipe(\r\n        filter(years => !!years)\r\n      );\r\n\r\n    container.viewMode = this._store.select(state => state.view.mode);\r\n\r\n    container.options = this._store\r\n      .select(state => state.showWeekNumbers)\r\n      .pipe(\r\n        map(showWeekNumbers => ({showWeekNumbers}))\r\n      );\r\n\r\n    return this;\r\n  }\r\n\r\n  /** event handlers */\r\n  setEventHandlers(container: BsDatepickerAbstractComponent): BsDatepickerEffects {\r\n    container.setViewMode = (event: BsDatepickerViewMode): void => {\r\n      this._store.dispatch(this._actions.changeViewMode(event));\r\n    };\r\n\r\n    container.navigateTo = (event: BsNavigationEvent): void => {\r\n      this._store.dispatch(this._actions.navigateStep(event.step));\r\n    };\r\n\r\n    container.dayHoverHandler = (event: CellHoverEvent): void => {\r\n      const _cell = event.cell as DayViewModel;\r\n      if (_cell.isOtherMonth || _cell.isDisabled) {\r\n        return;\r\n      }\r\n\r\n      this._store.dispatch(this._actions.hoverDay(event));\r\n      _cell.isHovered = event.isHovered;\r\n    };\r\n\r\n    container.monthHoverHandler = (event: CellHoverEvent): void => {\r\n      event.cell.isHovered = event.isHovered;\r\n    };\r\n\r\n    container.yearHoverHandler = (event: CellHoverEvent): void => {\r\n      event.cell.isHovered = event.isHovered;\r\n    };\r\n\r\n    return this;\r\n  }\r\n\r\n  registerDatepickerSideEffects(): BsDatepickerEffects {\r\n    this._subs.push(\r\n      this._store.select(state => state.view).subscribe(() => {\r\n        this._store.dispatch(this._actions.calculate());\r\n      })\r\n    );\r\n\r\n    // format calendar values on month model change\r\n    this._subs.push(\r\n      this._store\r\n        .select(state => state.monthsModel)\r\n        .pipe(\r\n          filter(monthModel => !!monthModel)\r\n        )\r\n        .subscribe(() => this._store.dispatch(this._actions.format()))\r\n    );\r\n\r\n    // flag day values\r\n    this._subs.push(\r\n      this._store\r\n        .select(state => state.formattedMonths)\r\n        .pipe(\r\n          filter(month => !!month)\r\n        )\r\n        .subscribe(() => this._store.dispatch(this._actions.flag()))\r\n    );\r\n\r\n    // flag day values\r\n    this._subs.push(\r\n      this._store\r\n        .select(state => state.selectedDate)\r\n        .pipe(\r\n          filter(selectedDate => !!selectedDate)\r\n        )\r\n        .subscribe(() => this._store.dispatch(this._actions.flag()))\r\n    );\r\n\r\n    // flag for date range picker\r\n    this._subs.push(\r\n      this._store\r\n        .select(state => state.selectedRange)\r\n        .pipe(\r\n          filter(selectedRange => !!selectedRange)\r\n        )\r\n        .subscribe(() => this._store.dispatch(this._actions.flag()))\r\n    );\r\n\r\n    // monthsCalendar\r\n    this._subs.push(\r\n      this._store\r\n        .select(state => state.monthsCalendar)\r\n        .subscribe(() => this._store.dispatch(this._actions.flag()))\r\n    );\r\n\r\n    // years calendar\r\n    this._subs.push(\r\n      this._store\r\n        .select(state => state.yearsCalendarModel)\r\n        .pipe(\r\n          filter(state => !!state)\r\n        )\r\n        .subscribe(() => this._store.dispatch(this._actions.flag()))\r\n    );\r\n\r\n    // on hover\r\n    this._subs.push(\r\n      this._store\r\n        .select(state => state.hoveredDate)\r\n        .pipe(\r\n          filter(hoveredDate => !!hoveredDate)\r\n        )\r\n        .subscribe(() => this._store.dispatch(this._actions.flag()))\r\n    );\r\n\r\n    // date custom classes\r\n    this._subs.push(\r\n      this._store\r\n        .select(state => state.dateCustomClasses)\r\n        .pipe(\r\n          filter(dateCustomClasses => !!dateCustomClasses)\r\n        )\r\n        .subscribe(() => this._store.dispatch(this._actions.flag()))\r\n    );\r\n\r\n    // date tooltip texts\r\n    this._subs.push(\r\n      this._store\r\n        .select(state => state.dateTooltipTexts)\r\n        .pipe(\r\n          filter(dateTooltipTexts => !!dateTooltipTexts)\r\n        )\r\n        .subscribe(() => this._store.dispatch(this._actions.flag()))\r\n    );\r\n\r\n    // on locale change\r\n    this._subs.push(\r\n      this._localeService.localeChange\r\n        .subscribe(locale => this._store.dispatch(this._actions.setLocale(locale)))\r\n    );\r\n\r\n    return this;\r\n  }\r\n\r\n  destroy(): void {\r\n    for (const sub of this._subs) {\r\n      sub.unsubscribe();\r\n    }\r\n  }\r\n}\r\n"]}